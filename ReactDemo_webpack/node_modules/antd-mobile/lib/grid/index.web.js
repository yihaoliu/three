'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=undefined;var _defineProperty2=require('babel-runtime/helpers/defineProperty');var _defineProperty3=_interopRequireDefault(_defineProperty2);var _extends2=require('babel-runtime/helpers/extends');var _extends3=_interopRequireDefault(_extends2);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);









var _react=require('react');var _react2=_interopRequireDefault(_react);
var _classnames=require('classnames');var _classnames2=_interopRequireDefault(_classnames);
var _flex=require('../flex');var _flex2=_interopRequireDefault(_flex);
var _index=require('../carousel/index.web');var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var __rest=undefined&&undefined.__rest||function(s,e){var t={};for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];}if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0)t[p[i]]=s[p[i]];}return t;};var
Grid=function(_React$Component){(0,_inherits3["default"])(Grid,_React$Component);
function Grid(props){(0,_classCallCheck3["default"])(this,Grid);var _this=(0,_possibleConstructorReturn3["default"])(this,
_React$Component.call(this,props));
_this.renderCarousel=function(rowsArr,pageCount,rowCount){var
prefixCls=_this.props.prefixCls;
var carouselMaxRow=_this.props.carouselMaxRow;
var pagesArr=[];
for(var pageIndex=0;pageIndex<pageCount;pageIndex++){
var pageRows=[];
for(var ii=0;ii<carouselMaxRow;ii++){
var rowIndex=pageIndex*carouselMaxRow+ii;
if(rowIndex<rowCount){
pageRows.push(rowsArr[rowIndex]);
}else
{

pageRows.push(_react2["default"].createElement('div',{key:'gridline-'+rowIndex}));
}
}
pagesArr.push(_react2["default"].createElement('div',{key:'pageitem-'+pageIndex,className:prefixCls+'-carousel-page'},pageRows));
}
return pagesArr;
};
_this.renderItem=function(dataItem,index,columnNum,renderItem){var
prefixCls=_this.props.prefixCls;
var itemEl=null;
if(renderItem){
itemEl=renderItem(dataItem,index);
}else
{
if(dataItem){var
icon=dataItem.icon,text=dataItem.text;
itemEl=_react2["default"].createElement('div',{className:prefixCls+'-item-inner-content column-num-'+columnNum},
_react2["default"].isValidElement(icon)?icon:_react2["default"].createElement('img',{className:prefixCls+'-icon',src:icon}),
_react2["default"].createElement('div',{className:prefixCls+'-text'},text));

}
}
return _react2["default"].createElement('div',{className:prefixCls+'-item-content'},
itemEl);

};
_this.state={
initialSlideWidth:0};return _this;

}Grid.prototype.
componentDidMount=function componentDidMount(){
this.setState({
initialSlideWidth:document.documentElement.clientWidth});

};Grid.prototype.
render=function render(){var _this2=this,_classNames;
var _a=this.props,prefixCls=_a.prefixCls,className=_a.className,data=_a.data,hasLine=_a.hasLine,isCarousel=_a.isCarousel,restProps=__rest(_a,["prefixCls","className","data","hasLine","isCarousel"]);var
columnNum=restProps.columnNum,carouselMaxRow=restProps.carouselMaxRow,_restProps$onClick=restProps.onClick,_onClick=_restProps$onClick===undefined?function(){}:_restProps$onClick,renderItem=restProps.renderItem,restPropsForCarousel=__rest(restProps,["columnNum","carouselMaxRow","onClick","renderItem"]);
columnNum=columnNum;
carouselMaxRow=carouselMaxRow;var
initialSlideWidth=this.state.initialSlideWidth;
var dataLength=data&&data.length||0;
var rowCount=Math.ceil(dataLength/columnNum);
var rowWidth=100/columnNum+'%';
var colStyle={
width:rowWidth};

var rowsArr=[];
for(var i=0;i<rowCount;i++){
var rowArr=[];var _loop=function _loop(
j){
var dataIndex=i*columnNum+j;
if(dataIndex<dataLength){
var el=data&&data[dataIndex];
rowArr.push(_react2["default"].createElement(_flex2["default"].Item,{key:'griditem-'+dataIndex,className:prefixCls+'-item',onClick:function onClick(){return _onClick(el,dataIndex);},style:colStyle},
_this2.renderItem(el,dataIndex,columnNum,renderItem)));

}else
{
rowArr.push(_react2["default"].createElement(_flex2["default"].Item,{key:'griditem-'+dataIndex,style:colStyle}));
}};for(var j=0;j<columnNum;j++){_loop(j);
}
rowsArr.push(_react2["default"].createElement(_flex2["default"],{justify:'center',align:'stretch',key:'gridline-'+i},rowArr));
}
var pageCount=Math.ceil(rowCount/carouselMaxRow);
var isCarouselMode=isCarousel&&pageCount>1;
var renderEl=void 0;
if(isCarouselMode){
if(initialSlideWidth>0){
renderEl=_react2["default"].createElement(_index2["default"],(0,_extends3["default"])({initialSlideWidth:initialSlideWidth},restPropsForCarousel),
this.renderCarousel(rowsArr,pageCount,rowCount));

}else
{

renderEl=null;
}
}else
{
renderEl=rowsArr;
}
return _react2["default"].createElement('div',{className:(0,_classnames2["default"])((_classNames={},(0,_defineProperty3["default"])(_classNames,
prefixCls,true),(0,_defineProperty3["default"])(_classNames,
prefixCls+'-line',hasLine),(0,_defineProperty3["default"])(_classNames,
className,className),_classNames))},

renderEl);

};return Grid;}(_react2["default"].Component);exports["default"]=Grid;

Grid.defaultProps={
data:[],
hasLine:true,
isCarousel:false,
columnNum:4,
carouselMaxRow:2,
prefixCls:'am-grid'};module.exports=exports['default'];